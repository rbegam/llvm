//===-- CSAInstrFormats.td - CSA Instruction Formats -------*- tablegen -*-===//
//
// Copyright (C) 2017-2018 Intel Corporation. All rights reserved.
//
// The information and source code contained herein is the exclusive
// property of Intel Corporation and may not be disclosed, examined
// or reproduced in whole or in part without explicit written authorization
// from the company.
//
//===----------------------------------------------------------------------===//

//===----------------------------------------------------------------------===//
// Instruction format superclass
//===----------------------------------------------------------------------===//

include "llvm/TableGen/SearchableTable.td"

// Generic operations
// For now, this just declares generic opcodes.  In the long run, we may want
// to have things like operands, type signatures
class GenericOp<string opStr, list<Predicate> preds = []> {
  string AsmString = opStr;
  list<Predicate> Preds = preds;
}

class CSAOpInfo;

class InstCSA<GenericOp genOp, CSAOpInfo opInfo, dag outs, dag ins,
      string asmstr, list<dag> pattern = [],
      list<Predicate> preds = [], InstrItinClass itin = NoItinerary>
    : Instruction {
  // Actual encoding TBD.  Might be variable length.
  field bits<64> Inst;

  let Namespace = "CSA";
  dag OutOperandList = outs;
  dag InOperandList = ins;
  let AsmString   = asmstr;
  let Pattern = pattern;
  let Predicates = preds;
  let Itinerary = itin;

  // The generic operator for this operation (e.g. ADD for ADD64)
  GenericOp GenOp = genOp;
  CSAOpInfo OpInfo = opInfo;
}

// CSA pseudo instruction format
class PseudoInstCSA<dag outs, dag ins, string asmstr, list<dag> pattern,
      list<Predicate> preds = [], InstrItinClass itin = IIPseudo>
    : InstCSA<?, ?, outs, ins, asmstr, pattern, preds, itin> {
  let isPseudo = 1;
}


// Generic format for now
class FMTGEN<GenericOp genOp, CSAOpInfo opInfo, dag outs, dag ins,
      string asmstr, list<dag> pattern,
      list<Predicate> preds = [], InstrItinClass itin = NoItinerary>
    : InstCSA<genOp, opInfo, outs, ins, asmstr, pattern, preds, itin> {
//let DecoderMethod = "DecodeFGENInstruction";
  let hasSideEffects = 0;
}
